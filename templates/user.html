<html>
    <head>
        <title>Profile</title>
        <style>
        #delete {
            color: red;
        }
        div.searchcontainer {
            background-color:white;
            color:black;
            margin:20px;
            padding:20px;
        }
        </style>
    <link rel="stylesheet" type="text/css" href="static/table.css">
    <link rel="stylesheet" type="text/css" href="static/style.css">
    <script src="static/table.js"></script>
    </head>
    <body>
        <h1 id="welcome">Welcome to your account!</h1>
        <p>You are logged in as: <b>{{ user.email }}</b>.</p>
        <hr>
        <h2>Your Searches:</h2>
        <div class="table-responsive-vertical shadow-z-1">
          <table id="table" class="table table-hover table-striped table-mc-light-blue">
            <thead>
              <tr>
                <th>Name</th>
                <th>Sources</th>
                <th>Rating</th>
              </tr>
            </thead>
            <tbody>
              {% for search in user.searches %}
              <tr>
                <td data-title="Name"><a href="/?s={{ search.id }}"> {{ search.name }} </a></td>
                <td data-title="Sources">{{ search.data_source_names() }}</td>
                <td data-title="Rating">
                  {{ search.get_rating() }}
                  {% if search.id not in rated %}
          <!-- code taken from https://codepen.io/jamesbarnett/pen/vlpkh -->
                      <div class ="searchcontainer">
                        <p>Rate The Search</p>
                        <script type="text/javascript" src="static/rate.js"></script>
                        <fieldset class="rating">
                            <input type="radio" id="star5-{{ search.id }}" name="rating" value="5" /><label class = "full" for="star5-{{ search.id }}" title="Awesome - 5 stars"></label>
                            <input type="radio" id="star4half-{{ search.id }}" name="rating" value="4.5" /><label class="half" for="star4half-{{ search.id }}" title="Pretty good - 4.5 stars"></label>
                            <input type="radio" id="star4-{{ search.id }}" name="rating" value="4" /><label class = "full" for="star4-{{ search.id }}" title="Pretty good - 4 stars"></label>
                            <input type="radio" id="star3half-{{ search.id }}" name="rating" value="3.5" /><label class="half" for="star3half-{{ search.id }}" title="Meh - 3.5 stars"></label>
                            <input type="radio" id="star3-{{ search.id }}" name="rating" value="3" /><label class = "full" for="star3-{{ search.id }}" title="Meh - 3 stars"></label>
                            <input type="radio" id="star2half-{{ search.id }}" name="rating" value="2.5" /><label class="half" for="star2half-{{ search.id }}" title="Not so good - 2.5 stars"></label>
                            <input type="radio" id="star2-{{ search.id }}" name="rating" value="2" /><label class = "full" for="star2-{{ search.id }}" title="Not so good - 2 stars"></label>
                            <input type="radio" id="star1half-{{ search.id }}" name="rating" value="1.5" /><label class="half" for="star1half-{{ search.id }}" title="Kinda bad - 1.5 stars"></label>
                            <input type="radio" id="star1-{{ search.id }}" name="rating" value="1" /><label class = "full" for="star1-{{ search.id }}" title="Real bad - 1 star"></label>
                            <input type="radio" id="starhalf-{{ search.id }}" name="rating" value="0.5" /><label class="half" for="starhalf-{{ search.id }}" title="Real real bad - 0.5 stars"></label>
                        </fieldset>
                        <button type="button" id="submit-{{ search.id }}" onclick="submitrating({{ search.id }})">Submit</button>
                      </div>
                  {% endif %}
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        <hr>
        <div>
            <a href="/">Home</a>
        </div>
        <div>
            <a href="/create_search">Create Search</a>
        </div>
        <div>
            <a href="/logout">Logout</a>
        </div>
        <div>
            <a id="delete" href="/delete-account">Delete Account</a>
        </div>
        <br>
        <br>
    </body>
</html>
